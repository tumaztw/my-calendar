<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>福山週看板</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 min-h-screen">
    <div class="max-w-md mx-auto bg-white min-h-screen shadow-lg flex flex-col">
        <div class="bg-indigo-600 p-6 text-white text-center shadow-md">
            <h1 class="text-xl font-bold text-white">福山國中 114-1 智慧週報</h1>
            <p class="text-xs opacity-80 mt-1 text-white">左營區重信路 215 號 ⇄ 楠梓土庫</p>
        </div>

        <div class="flex items-center justify-between p-4 bg-white sticky top-0 border-b z-20">
            <button onclick="changeWeek(-1)" class="px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-bold">◀ 上一週</button>
            <div id="week-label" class="font-bold text-indigo-700"></div>
            <button onclick="changeWeek(1)" class="px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-bold">下一週 ▶</button>
        </div>

        <div id="week-container" class="flex-1 p-4 space-y-3"></div>

        <div class="p-4 text-[10px] text-center text-gray-300">
            資料來源：福山國中 114學年度第一學期行事曆
        </div>
    </div>

    <script>
        // 從 PDF 完整提取的 114-1 重要時程
        const events = [
            { d: "2025-10-15", t: "第一次段考 (Day 1)", c: "bg-red-500" },
            { d: "2025-10-16", t: "第一次段考 (Day 2)", c: "bg-red-500" },
            { d: "2025-11-25", t: "第二次段考 (Day 1)", c: "bg-red-500" },
            { d: "2025-11-26", t: "第二次段考 (Day 2)", c: "bg-red-500" },
            { d: "2025-12-12", t: "校慶運動會", c: "bg-orange-500" },
            { d: "2025-12-13", t: "校慶運動會", c: "bg-orange-500" },
            { d: "2025-12-15", t: "校慶補假 (當天不上課)", c: "bg-green-500" },
            { d: "2025-12-19", t: "校內語文競賽", c: "bg-blue-400" },
            { d: "2025-12-24", t: "國文科作業抽查 (習作/作文)", c: "bg-blue-600" },
            { d: "2026-01-01", t: "元旦放假", c: "bg-green-500" },
            { d: "2026-01-15", t: "第三次段考 (Day 1)", c: "bg-red-500" },
            { d: "2026-01-16", t: "第三次段考 (Day 2)", c: "bg-red-500" },
            { d: "2026-01-23", t: "休業式 (15:30 放學)", c: "bg-indigo-500" }
        ];

        let currentAnchorDate = new Date();

        function renderWeek() {
            const container = document.getElementById('week-container');
            const label = document.getElementById('week-label');
            container.innerHTML = '';

            // 取得當週週一
            let tempDate = new Date(currentAnchorDate);
            let day = tempDate.getDay();
            let diff = tempDate.getDate() - day + (day === 0 ? -6 : 1);
            let monday = new Date(tempDate.setDate(diff));

            let sunday = new Date(monday);
            sunday.setDate(monday.getDate() + 6);

            label.innerText = `${monday.getMonth()+1}/${monday.getDate()} - ${sunday.getMonth()+1}/${sunday.getDate()}`;

            for (let i = 0; i < 7; i++) {
                let d = new Date(monday);
                d.setDate(monday.getDate() + i);
                
                // 格式化日期為 YYYY-MM-DD 以便比對
                let y = d.getFullYear();
                let m = String(d.getMonth() + 1).padStart(2, '0');
                let dayNum = String(d.getDate()).padStart(2, '0');
                let dString = `${y}-${m}-${dayNum}`;
                
                let dayName = ["日", "一", "二", "三", "四", "五", "六"][d.getDay()];
                let dayEvents = events.filter(e => e.d === dString);
                let isToday = new Date().toLocaleDateString() === d.toLocaleDateString();

                let eventHtml = '';
                dayEvents.forEach(e => {
                    eventHtml += `
                        <div class="flex items-center gap-2 bg-white border border-gray-100 p-2 rounded-lg shadow-sm mt-1">
                            <span class="w-2 h-2 rounded-full ${e.c}"></span>
                            <span class="text-sm font-bold text-gray-700">${e.t}</span>
                        </div>`;
                });

                container.innerHTML += `
                    <div class="flex gap-4 ${isToday ? 'bg-indigo-50 rounded-2xl p-2 ring-1 ring-indigo-100' : 'p-2'}">
                        <div class="w-10 text-center shrink-0">
                            <div class="text-[10px] ${isToday ? 'text-indigo-400' : 'text-gray-400'} font-bold">${dayName}</div>
                            <div class="text-lg font-mono ${isToday ? 'text-indigo-600 font-black' : 'text-gray-600'}">${d.getDate()}</div>
                        </div>
                        <div class="flex-1 min-h-[45px]">
                            ${eventHtml || '<div class="text-xs text-gray-300 py-3 italic">無記事</div>'}
                        </div>
                    </div>`;
            }
        }

        function changeWeek(n) {
            currentAnchorDate.setDate(currentAnchorDate.getDate() + (n * 7));
            renderWeek();
        }

        renderWeek();
    </script>
</body>
</html>
